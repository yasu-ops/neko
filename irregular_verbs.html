<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªä¸è¦å‰‡å‹•è©ãƒ‘ã‚ºãƒ«</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const IrregularVerbsPuzzle = () => {
            const verbData = [
                ['be', 'was/were', 'been', 'ã§ã‚ã‚‹ãƒ»ã„ã‚‹'],
                ['bear', 'bore', 'born/borne', 'ç”Ÿã‚€ãƒ»é‹ã¶'],
                ['beat', 'beat', 'beaten', 'æ‰“ã¤'],
                ['become', 'became', 'become', 'ãªã‚‹'],
                ['begin', 'began', 'begun', 'å§‹ã‚ã‚‹'],
                ['bend', 'bent', 'bent', 'æ›²ã’ã‚‹'],
                ['bet', 'bet', 'bet', 'è³­ã‘ã‚‹'],
                ['bid', 'bid', 'bid', 'å€¤ã‚’ã¤ã‘ã‚‹'],
                ['bind', 'bound', 'bound', 'ç¸›ã‚‹'],
                ['bite', 'bit', 'bitten', 'ã‹ã‚€'],
                ['blow', 'blew', 'blown', 'å¹ã'],
                ['break', 'broke', 'broken', 'å£Šã™'],
                ['breed', 'bred', 'bred', 'é£¼è‚²ã™ã‚‹'],
                ['bring', 'brought', 'brought', 'æŒå‚ã™ã‚‹'],
                ['build', 'built', 'built', 'å»ºã¦ã‚‹'],
                ['burn', 'burnt', 'burnt', 'ç‡ƒã‚„ã™'],
                ['burst', 'burst', 'burst', 'ç ´è£‚ã™ã‚‹'],
                ['buy', 'bought', 'bought', 'è²·ã†'],
                ['catch', 'caught', 'caught', 'æ•ã¾ãˆã‚‹'],
                ['choose', 'chose', 'chosen', 'é¸ã¶'],
                ['come', 'came', 'come', 'æ¥ã‚‹'],
                ['cost', 'cost', 'cost', 'è²»ç”¨ãŒã‹ã‹ã‚‹'],
                ['cut', 'cut', 'cut', 'åˆ‡ã‚‹'],
                ['deal', 'dealt', 'dealt', 'å–å¼•ã™ã‚‹'],
                ['dig', 'dug', 'dug', 'æ˜ã‚‹'],
                ['do', 'did', 'done', 'ã™ã‚‹'],
                ['draw', 'drew', 'drawn', 'æããƒ»å¼•ã'],
                ['dream', 'dreamt', 'dreamt', 'å¤¢ã‚’è¦‹ã‚‹'],
                ['drink', 'drank', 'drunk', 'é£²ã‚€'],
                ['drive', 'drove', 'driven', 'é‹è»¢ã™ã‚‹'],
                ['eat', 'ate', 'eaten', 'é£Ÿã¹ã‚‹'],
                ['fall', 'fell', 'fallen', 'è½ã¡ã‚‹'],
                ['feed', 'fed', 'fed', 'é£Ÿã¹ç‰©ã‚’ä¸ãˆã‚‹'],
                ['feel', 'felt', 'felt', 'æ„Ÿã˜ã‚‹'],
                ['fight', 'fought', 'fought', 'æˆ¦ã†'],
                ['find', 'found', 'found', 'è¦‹ã¤ã‘ã‚‹'],
                ['flee', 'fled', 'fled', 'é€ƒã’ã‚‹'],
                ['fly', 'flew', 'flown', 'é£›ã¶'],
                ['forbid', 'forbade', 'forbidden', 'ç¦æ­¢ã™ã‚‹'],
                ['forget', 'forgot', 'forgotten', 'å¿˜ã‚Œã‚‹'],
                ['forgive', 'forgave', 'forgiven', 'è¨±ã™'],
                ['freeze', 'froze', 'frozen', 'å‡ã‚‹'],
                ['get', 'got', 'got/gotten', 'å¾—ã‚‹'],
                ['give', 'gave', 'given', 'ä¸ãˆã‚‹'],
                ['go', 'went', 'gone', 'è¡Œã'],
                ['grow', 'grew', 'grown', 'æˆé•·ã™ã‚‹'],
                ['hang', 'hung', 'hung', 'ã¤ã‚‹ã™'],
                ['have', 'had', 'had', 'æŒã¤'],
                ['hear', 'heard', 'heard', 'èã'],
                ['hide', 'hid', 'hidden', 'éš ã™'],
                ['hit', 'hit', 'hit', 'æ‰“ã¤'],
                ['hold', 'held', 'held', 'æŒã¤'],
                ['hurt', 'hurt', 'hurt', 'å‚·ã¤ã‘ã‚‹'],
                ['keep', 'kept', 'kept', 'ä¿ã¤'],
                ['know', 'knew', 'known', 'çŸ¥ã‚‹'],
                ['lay', 'laid', 'laid', 'ç½®ã'],
                ['lead', 'led', 'led', 'å°ã'],
                ['learn', 'learnt', 'learnt', 'å­¦ã¶'],
                ['leave', 'left', 'left', 'å»ã‚‹'],
                ['lend', 'lent', 'lent', 'è²¸ã™'],
                ['let', 'let', 'let', 'ã•ã›ã‚‹'],
                ['lie', 'lay', 'lain', 'æ¨ªã«ãªã‚‹'],
                ['light', 'lit', 'lit', 'ç«ã‚’ã¤ã‘ã‚‹'],
                ['lose', 'lost', 'lost', 'å¤±ã†'],
                ['make', 'made', 'made', 'ä½œã‚‹'],
                ['mean', 'meant', 'meant', 'æ„å‘³ã™ã‚‹'],
                ['meet', 'met', 'met', 'ä¼šã†'],
                ['pay', 'paid', 'paid', 'æ”¯æ‰•ã†'],
                ['put', 'put', 'put', 'ç½®ã'],
                ['read', 'read', 'read', 'èª­ã‚€'],
                ['ride', 'rode', 'ridden', 'ä¹—ã‚‹'],
                ['ring', 'rang', 'rung', 'é³´ã‚‹'],
                ['rise', 'rose', 'risen', 'ä¸ŠãŒã‚‹'],
                ['run', 'ran', 'run', 'èµ°ã‚‹'],
                ['say', 'said', 'said', 'è¨€ã†'],
                ['see', 'saw', 'seen', 'è¦‹ã‚‹'],
                ['seek', 'sought', 'sought', 'æ¢ã™'],
                ['sell', 'sold', 'sold', 'å£²ã‚‹'],
                ['send', 'sent', 'sent', 'é€ã‚‹'],
                ['set', 'set', 'set', 'è¨­å®šã™ã‚‹'],
                ['shake', 'shook', 'shaken', 'æŒ¯ã‚‹'],
                ['shine', 'shone', 'shone', 'è¼ã'],
                ['shoot', 'shot', 'shot', 'æ’ƒã¤'],
                ['show', 'showed', 'shown', 'è¦‹ã›ã‚‹'],
                ['shut', 'shut', 'shut', 'é–‰ã‚ã‚‹'],
                ['sing', 'sang', 'sung', 'æ­Œã†'],
                ['sink', 'sank', 'sunk', 'æ²ˆã‚€'],
                ['sit', 'sat', 'sat', 'åº§ã‚‹'],
                ['sleep', 'slept', 'slept', 'çœ ã‚‹'],
                ['slide', 'slid', 'slid', 'æ»‘ã‚‹'],
                ['speak', 'spoke', 'spoken', 'è©±ã™'],
                ['spend', 'spent', 'spent', 'ä½¿ã†'],
                ['spin', 'spun', 'spun', 'å›è»¢ã™ã‚‹'],
                ['split', 'split', 'split', 'åˆ†å‰²ã™ã‚‹'],
                ['spread', 'spread', 'spread', 'åºƒã’ã‚‹'],
                ['stand', 'stood', 'stood', 'ç«‹ã¤'],
                ['steal', 'stole', 'stolen', 'ç›—ã‚€'],
                ['stick', 'stuck', 'stuck', 'åˆºã™'],
                ['strike', 'struck', 'struck', 'æ‰“ã¤'],
                ['swear', 'swore', 'sworn', 'èª“ã†'],
                ['sweep', 'swept', 'swept', 'æƒã'],
                ['swim', 'swam', 'swum', 'æ³³ã'],
                ['swing', 'swung', 'swung', 'æŒ¯ã‚‹'],
                ['take', 'took', 'taken', 'å–ã‚‹'],
                ['teach', 'taught', 'taught', 'æ•™ãˆã‚‹'],
                ['tear', 'tore', 'torn', 'ç ´ã‚‹'],
                ['tell', 'told', 'told', 'å‘Šã’ã‚‹'],
                ['think', 'thought', 'thought', 'è€ƒãˆã‚‹'],
                ['throw', 'threw', 'thrown', 'æŠ•ã’ã‚‹'],
                ['understand', 'understood', 'understood', 'ç†è§£ã™ã‚‹'],
                ['wake', 'woke', 'woken', 'ç›®è¦šã‚ã‚‹'],
                ['wear', 'wore', 'worn', 'ç€ã‚‹'],
                ['win', 'won', 'won', 'å‹ã¤'],
                ['wind', 'wound', 'wound', 'å·»ã'],
                ['write', 'wrote', 'written', 'æ›¸ã']
            ];

            const [selectedVerbs, setSelectedVerbs] = useState([]);
            const [gameCards, setGameCards] = useState([]);
            const [selectedCards, setSelectedCards] = useState([]);
            const [matchedSets, setMatchedSets] = useState([]);
            const [score, setScore] = useState(0);
            const [attempts, setAttempts] = useState(0);
            const [gameComplete, setGameComplete] = useState(false);
            const [showMeaning, setShowMeaning] = useState(false);

            const initializeGame = () => {
                const shuffledVerbs = [...verbData].sort(() => Math.random() - 0.5);
                const selectedVerbsData = shuffledVerbs.slice(0, 6);
                setSelectedVerbs(selectedVerbsData);
                const cards = [];
                selectedVerbsData.forEach((verb, index) => {
                    cards.push(
                        { id: `${index}-0`, text: verb[0], verbIndex: index, meaning: verb[3] },
                        { id: `${index}-1`, text: verb[1], verbIndex: index, meaning: verb[3] },
                        { id: `${index}-2`, text: verb[2], verbIndex: index, meaning: verb[3] }
                    );
                });
                setGameCards(cards.sort(() => Math.random() - 0.5));
                setSelectedCards([]);
                setMatchedSets([]);
                setScore(0);
                setAttempts(0);
                setGameComplete(false);
            };

            const shuffleCards = () => {
                setGameCards([...gameCards].sort(() => Math.random() - 0.5));
                setSelectedCards([]);
            };

            const checkMatch = (selectedCards) => {
                if (selectedCards.length !== 3) return false;
                const verbIndex = selectedCards[0].verbIndex;
                if (!selectedCards.every(c => c.verbIndex === verbIndex)) return false;
                const correct = selectedVerbs[verbIndex];
                return selectedCards.map(c => c.text).join(',') === correct.slice(0, 3).join(',');
            };

            const handleCardClick = (card) => {
                if (selectedCards.find(c => c.id === card.id) || matchedSets.some(set => set.find(c => c.id === card.id))) return;
                const newSelected = [...selectedCards, card];
                setSelectedCards(newSelected);
                if (newSelected.length === 3) {
                    setAttempts(prev => prev + 1);
                    if (checkMatch(newSelected)) {
                        setMatchedSets(prev => [...prev, newSelected]);
                        setScore(prev => prev + 100);
                        if (matchedSets.length + 1 === selectedVerbs.length) setGameComplete(true);
                        setTimeout(() => setSelectedCards([]), 500);
                    } else {
                        setTimeout(() => setSelectedCards([]), 1000);
                    }
                }
            };

            const getCardStyle = (card) => {
                const isSelected = selectedCards.find(c => c.id === card.id);
                const isMatched = matchedSets.some(set => set.find(c => c.id === card.id));
                let style = "w-24 h-16 m-1 p-2 rounded-lg border-2 cursor-pointer transition-all duration-300 text-sm font-bold flex flex-col items-center justify-center ";
                if (isMatched) return style + "bg-green-100 border-green-400 text-green-800 cursor-default scale-95";
                if (isSelected) return style + "bg-blue-100 border-blue-400 text-blue-800 scale-105";
                return style + "bg-white border-gray-300 hover:border-blue-300 hover:shadow-md";
            };

            useEffect(() => {
                initializeGame();
            }, []);

            return (
                <div className="max-w-4xl mx-auto p-6 bg-gradient-to-br from-purple-50 to-blue-50 min-h-screen">
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-2">
                            <span>â­</span>
                            è‹±èªä¸è¦å‰‡å‹•è©ãƒ‘ã‚ºãƒ«
                            <span>â­</span>
                        </h1>
                        <p className="text-gray-600 mb-4">åŒã˜å‹•è©ã®3ã¤ã®å½¢ã‚’æ­£ã—ã„é †åºã§é¸ã‚“ã§ãƒãƒƒãƒã•ã›ã‚ˆã†ï¼</p>
                        <div className="flex justify-center gap-4 mb-4">
                            <div className="bg-white rounded-lg p-3 shadow-sm">
                                <div className="text-sm text-gray-500">ã‚¹ã‚³ã‚¢</div>
                                <div className="text-xl font-bold text-purple-600">{score}</div>
                            </div>
                            <div className="bg-white rounded-lg p-3 shadow-sm">
                                <div className="text-sm text-gray-500">è©¦è¡Œå›æ•°</div>
                                <div className="text-xl font-bold text-orange-600">{attempts}</div>
                            </div>
                            <div className="bg-white rounded-lg p-3 shadow-sm">
                                <div className="text-sm text-gray-500">å®Œäº†</div>
                                <div className="text-xl font-bold text-teal-600">{matchedSets.length}/{selectedVerbs.length}</div>
                            </div>
                        </div>
                        <div className="flex justify-center gap-2 mb-4">
                            <button onClick={initializeGame} className="flex items-center gap-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors">
                                <span>ğŸ”„</span>æ–°ã—ã„ã‚²ãƒ¼ãƒ 
                            </button>
                            <button onClick={shuffleCards} className="flex items-center gap-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                <span>ğŸ”€</span>ã‚·ãƒ£ãƒƒãƒ•ãƒ«
                            </button>
                            <button onClick={() => setShowMeaning(!showMeaning)} className="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                                {showMeaning ? 'æ„å‘³ã‚’éš ã™' : 'æ„å‘³ã‚’è¡¨ç¤º'}
                            </button>
                        </div>
                    </div>
                    <div className="flex flex-wrap justify-center">
                        {gameCards.map(card => (
                            <div key={card.id} className={getCardStyle(card)} onClick={() => handleCardClick(card)}>
                                <div>{card.text}</div>
                                {showMeaning && <div className="text-xs text-gray-500">{card.meaning}</div>}
                            </div>
                        ))}
                    </div>
                    {gameComplete && (
                        <div className="mt-6 text-center text-2xl font-bold text-green-600 flex justify-center items-center gap-2">
                            <span>ğŸ†</span> ãŠã‚ã§ã¨ã†ï¼å…¨ã¦ã®å‹•è©ã‚’ãƒãƒƒãƒã—ã¾ã—ãŸï¼
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<IrregularVerbsPuzzle />, document.getElementById('root'));
    </script>
</body>
</html>
